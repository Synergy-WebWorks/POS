import{u as h,a as j,r as v,j as s,b as o}from"./app-DK48ZznF.js";import g from"./products-section-BZ0nHVda.js";import w from"./print-receipt-section-GLCIpwdM.js";import"./product-component-DnRZA5xm.js";import"./index-Bll0mY1a.js";function F(){const{carts:i}=h(e=>e.products),n=j(),[a,r]=v.useState(0),d=i.reduce((e,t)=>e+(parseFloat(t.sub_price)*parseInt(t.pcs)-(parseFloat(t.discount)||0)),0)-parseFloat(a||0),p=e=>{const t=i.map(l=>l.id===e.id?{...l,pcs:l.pcs+1}:l);n(o(t))};console.log("sdfdadwad",i);const x=e=>{const t=i.map(l=>l.id===e.id?{...l,pcs:l.pcs-1}:l).filter(l=>l.pcs>0);n(o(t))};function u(e,t){const l=i.map(c=>c.id===e.id?{...c,sub_price:e[t],type_item_discount:t}:c);n(o(l))}const f=(e,t)=>{const l=i.map(c=>c.id===e.id?{...c,discount:parseFloat(t)||0}:c);n(o(l))},m=i.reduce((e,t)=>e+parseFloat(t.sub_price)*parseInt(t.pcs),0),b=i.reduce((e,t)=>e+(parseFloat(t.discount)||0),0)+parseFloat(a||0);return s.jsx("div",{class:"w-full ",children:s.jsxs("div",{class:"flex lg:flex-row flex-col-reverse shadow-lg",children:[s.jsx(g,{}),s.jsxs("div",{class:"w-full lg:w-2/5",children:[s.jsx("div",{class:"flex flex-row items-center justify-between px-5 mt-5",children:s.jsx("div",{class:"font-bold text-xl",children:"Current Order"})}),s.jsx("div",{class:"px-5 py-4 overflow-y-auto h-72",children:i.map(e=>{var t;return s.jsxs("div",{class:"flex flex-row gap-3 border-pink-300 border  p-2 rounded-lg shadow-md justify-between items-center mb-4",children:[s.jsxs("div",{class:"flex flex-1 flex-row gap-3 items-center w-2/5",children:[s.jsx("img",{src:(t=e==null?void 0:e.uploads[0])==null?void 0:t.file,class:"w-10 h-10 object-cover rounded-md",alt:""}),s.jsx("span",{class:"font-semibold text-sm",children:e==null?void 0:e.name})]}),s.jsxs("div",{class:"flex-1 flex flex-col gap-3 justify-between",children:[s.jsxs("div",{className:"flex w-full",children:[s.jsx("button",{onClick:()=>x(e),class:"px-3 py-1 rounded-md bg-gray-300 ",children:"-"}),s.jsx("span",{class:"font-semibold mx-1",children:s.jsx("input",{id:"pcs",name:"pcs",type:"text",value:e==null?void 0:e.pcs,className:"block text-center w-full rounded-md bg-white py-1.5 text-base text-gray-900 placeholder:text-gray-400 focus:ring-pink-300 focus:border-pink-300 sm:text-sm"})}),s.jsx("button",{onClick:()=>p(e),class:"px-3 py-1 rounded-md bg-gray-300 ",children:"+"})]}),s.jsx("span",{class:" font-semibold text-sm",children:s.jsxs("select",{onChange:l=>u(e,l.target.value),id:"pricing",name:"pricing",autoComplete:"pricing",className:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1 pl-3 pr-1 text-base text-gray-900 outline-none focus:ring-pink-300 focus:border-pink-300 sm:text-sm/6",children:[s.jsx("option",{disabled:!0,selected:!0,children:"Select Price"}),s.jsx("option",{value:"srp",children:"SRP Price"}),s.jsx("option",{value:"reseller",children:"Reseller Price"}),s.jsx("option",{value:"city_distributor",children:"City Distributor Price"}),s.jsx("option",{value:"district_distributor",children:"District Distributor Price"}),s.jsx("option",{value:"provincial_distributor",children:"Provincial Distributor Price"})]})})]}),s.jsxs("div",{class:"font-semibold text-xl flex-1  flex flex-col gap-3  text-left",children:[s.jsxs("div",{className:"flex-1",children:["₱"," ",parseInt(e==null?void 0:e.sub_price).toFixed(2)]}),s.jsx("div",{className:"flex-1",children:s.jsx("input",{placeholder:"Discount",type:"number",value:e.discount||"",onChange:l=>f(e,l.target.value),className:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1 pl-3 pr-1 text-base text-gray-900 outline-none focus:ring-pink-300 focus:border-pink-300 sm:text-sm/6"})})]})]})})}),s.jsx("div",{class:"px-5 mt-5",children:s.jsxs("div",{class:"py-4 rounded-md shadow-lg",children:[s.jsx("div",{className:"px-4",children:s.jsx("input",{placeholder:"Overall Product Discount",type:"number",value:a,onChange:e=>r(e.target.value),className:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1 pl-3 pr-1 text-base text-gray-900 outline-none focus:ring-pink-300 focus:border-pink-300 sm:text-sm/6"})}),s.jsxs("div",{class:" px-4 flex justify-between ",children:[s.jsx("span",{class:"font-semibold text-sm",children:"Subtotal"}),s.jsxs("span",{class:"font-bold",children:["₱",m.toFixed(2)]})]}),s.jsxs("div",{class:" px-4 flex justify-between ",children:[s.jsx("span",{class:"font-semibold text-sm",children:"Total Discount"}),s.jsxs("span",{class:"font-bold",children:["₱",b.toFixed(2)]})]}),s.jsxs("div",{class:"border-t-2 mt-3 py-2 px-4 flex items-center justify-between",children:[s.jsx("span",{class:"font-semibold text-2xl",children:"Total"}),s.jsxs("span",{class:"font-bold text-2xl",children:["₱",d.toFixed(2)]})]})]})}),s.jsx("div",{class:"px-5 mt-5",children:s.jsx(w,{})})]})]})})}export{F as default};
