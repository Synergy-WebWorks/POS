import{u as w,b as y,r as f,j as e,d}from"./app-NpKQ55uy.js";import N from"./products-section-DFU1HV6F.js";import F from"./print-receipt-section-BDFnG5lt.js";import"./index-_ZY5ey_u.js";import"./product-component-DNG-roTk.js";import"./input-DEwyN3PW.js";import"./transition-B6H0kzGq.js";import"./dialog-NDd08Bls.js";import"./portal-BoXClXhU.js";import"./index-B67aJnqZ.js";import"./customer-thunk-XxL2_Bki.js";import"./BanknotesIcon-CS3Z9k2E.js";function L(){const{carts:i}=w(s=>s.products),c=y(),[a,p]=f.useState(null),[x,h]=f.useState("Store"),b=s=>{const t=i.map(l=>l.id===s.id?{...l,pcs:l.pcs+1}:l);c(d(t))};console.log("sdfdadwad",i);const j=s=>{const t=i.map(l=>l.id===s.id?{...l,pcs:l.pcs-1}:l).filter(l=>l.pcs>0);c(d(t))};function v(s,t){const l=i.map(n=>n.id===s.id?{...n,sub_price:s[t],type_item_discount:t}:n);c(d(l))}const g=(s,t)=>{const l=i.map(n=>n.id===s.id?{...n,discount:parseFloat(t)||0}:n);c(d(l))},u=i.reduce((s,t)=>s+parseFloat(t.sub_price)*parseInt(t.pcs),0),o=i.reduce((s,t)=>s+(parseFloat(t.discount)||0),0),r=o+parseFloat(a||0),m=i.reduce((s,t)=>s+(parseFloat(t.sub_price)*parseInt(t.pcs)-(parseFloat(t.discount)||0)),0)-parseFloat(a||0);return e.jsx("div",{class:"w-full ",children:e.jsxs("div",{class:"flex lg:flex-row flex-col-reverse shadow-lg",children:[e.jsx(N,{storeName:x}),e.jsxs("div",{class:"w-full lg:w-2/5",children:[e.jsx("div",{className:"px-5 flex w-full gap-3",children:e.jsx("div",{className:"w-full",children:e.jsxs("select",{value:x,onChange:s=>h(s.target.value),className:"w-full rounded-md",name:"",children:[e.jsx("option",{value:"Store",children:"Store"}),e.jsx("option",{value:"Shopee",children:"Shopee"})]})})}),e.jsx("div",{class:"flex flex-row items-center justify-between px-5 mt-5",children:e.jsx("div",{class:"font-bold text-xl",children:"Current Order"})}),e.jsx("div",{class:"px-5 py-4 overflow-y-auto h-96",children:i.map(s=>{var t;return e.jsxs("div",{class:"flex flex-row gap-3 border-pink-300 border  p-2 rounded-lg shadow-md justify-between items-center mb-4",children:[e.jsxs("div",{class:"flex flex-1 flex-col gap-3 items-start  justify-between w-2/5",children:[e.jsxs("div",{className:"flex text-center w-full gap-3",children:[e.jsx("img",{src:(t=s==null?void 0:s.uploads[0])==null?void 0:t.file,class:"w-10 h-10 object-cover rounded-md",alt:""}),e.jsx("span",{class:"font-semibold text-sm",children:s==null?void 0:s.name})]}),e.jsxs("div",{className:"font-bold",children:["₱"," ",parseFloat(s.sub_price).toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),e.jsxs("div",{class:"flex-1 flex flex-col gap-3 justify-between",children:[e.jsxs("div",{className:"flex w-full",children:[e.jsx("button",{onClick:()=>j(s),class:"px-3 py-1 rounded-md bg-gray-300 ",children:"-"}),e.jsx("span",{class:"font-semibold mx-1",children:e.jsx("input",{id:"pcs",name:"pcs",type:"text",value:s==null?void 0:s.pcs,className:"block text-center w-full rounded-md bg-white py-1.5 text-base text-gray-900 placeholder:text-gray-400 focus:ring-pink-300 focus:border-pink-300 sm:text-sm"})}),e.jsx("button",{onClick:()=>b(s),class:"px-3 py-1 rounded-md bg-gray-300 ",children:"+"})]}),e.jsx("span",{class:" font-semibold text-sm",children:e.jsxs("select",{onChange:l=>v(s,l.target.value),id:"pricing",name:"pricing",autoComplete:"pricing",className:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1 pl-3 pr-1 text-base text-gray-900 outline-none focus:ring-pink-300 focus:border-pink-300 sm:text-sm/6",children:[e.jsx("option",{value:"srp",selected:!0,children:"SRP Price"}),e.jsx("option",{value:"reseller",children:"Reseller Price"}),e.jsx("option",{value:"city_distributor",children:"City Distributor Price"}),e.jsx("option",{value:"district_distributor",children:"District Distributor Price"}),e.jsx("option",{value:"provincial_distributor",children:"Provincial Distributor Price"})]})})]}),e.jsxs("div",{class:"font-semibold text-xl flex-1  flex flex-col gap-3  text-left",children:[e.jsxs("div",{className:"flex-1",children:["₱",parseFloat(Number(s.sub_price)*Number(s.pcs??"1")-Number(s.discount??"0")).toFixed(2)]}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{placeholder:"Discount",type:"number",value:s.discount||"",onChange:l=>g(s,l.target.value),className:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1 pl-3 pr-1 text-base text-gray-900 outline-none focus:ring-pink-300 focus:border-pink-300 sm:text-sm/6"})})]})]})})}),e.jsx("div",{class:"px-5 mt-5",children:e.jsxs("div",{class:"rounded-md shadow-lg",children:[e.jsx("div",{className:"px-4 mb-4",children:e.jsx("input",{placeholder:"Overall Product Discount",type:"number",value:a,onChange:s=>p(s.target.value==""?0:s.target.value),className:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1 pl-3 pr-1 text-base text-gray-900 outline-none focus:ring-pink-300 focus:border-pink-300 sm:text-sm/6"})}),e.jsxs("div",{class:" px-4 flex justify-between ",children:[e.jsx("span",{class:"font-semibold text-sm",children:"Subtotal"}),e.jsxs("span",{class:"font-bold",children:["₱",u.toFixed(2)]})]}),e.jsxs("div",{class:" px-4 flex justify-between ",children:[e.jsx("span",{class:"font-semibold text-sm",children:"Discount Per Item"}),e.jsxs("span",{class:"font-bold",children:["₱",o==null?void 0:o.toFixed(2)]})]}),e.jsxs("div",{class:" px-4 flex justify-between ",children:[e.jsx("span",{class:"font-semibold text-sm",children:"Discount Per Order"}),e.jsxs("span",{class:"font-bold",children:["₱",isNaN(parseFloat(a))?"0.00":parseFloat(a).toFixed(2)]})]}),e.jsxs("div",{class:" px-4 flex justify-between ",children:[e.jsx("span",{class:"font-semibold text-sm",children:"Total Discount"}),e.jsxs("span",{class:"font-bold",children:["₱",r==null?void 0:r.toFixed(2)]})]}),e.jsxs("div",{class:"border-t-2 mt-3 py-2 px-4 flex items-center justify-between",children:[e.jsx("span",{class:"font-semibold text-2xl",children:"Total"}),e.jsxs("span",{class:"font-bold text-2xl",children:["₱",m.toFixed(2)]})]})]})}),e.jsx("div",{class:"px-5 mt-5",children:e.jsx(F,{data:i,subtotal:u,totalItemDiscount:o,totalDiscount:r,total_price:m,setOverallDiscount:p,discount_per_order:isNaN(parseFloat(a))?"0":a})})]})]})})}export{L as default};
